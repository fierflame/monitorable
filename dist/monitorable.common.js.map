{"version":3,"file":"monitorable.common.js","sources":["../src/utils.ts","../src/state.ts","../src/executable.ts","../src/value.ts"],"sourcesContent":["\nlet printErrorLog: undefined | ((info: any) => void);\n/** 设置或移除错误打印函数 */\nexport function printError(fn?: (info: any) => void): void;\n/** 打印错误 */\nexport function printError(info: any, print: true): void;\n/** 打印错误 */\nexport function printError(info: any): void;\nexport function printError(\n\tinfo?: string | Error | ((info: any) => void),\n\tprint = false\n) {\n\tif (!print && (typeof info === 'function' || info === undefined)) {\n\t\tprintErrorLog = info;\n\t\treturn;\n\t}\n\tif (typeof printErrorLog === 'function') {\n\t\tprintErrorLog(info);\n\t\treturn;\n\t}\n\tconsole.error(info);\n}\n\n/** 回调函数安全化处理 */\nexport function safeify<T extends any[]>(\n\tfn: (...p: T) => void\n): (...p: T) => void {\n\treturn (...p) => {\n\t\ttry {\n\t\t\tfn(...p);\n\t\t} catch(e) {\n\t\t\tprintError(e, true);\n\t\t}\n\t};\n}\n\nexport function getMapValue<K, V>(\n\tmap: Map<K, V>,\n\tkey: K,\n\tdef: () => V,\n): V;\nexport function getMapValue<K extends object, V>(\n\tmap: WeakMap<K, V>,\n\tkey: K,\n\tdef: () => V,\n): V;\nexport function getMapValue<K, V>(\n\tmap: WeakMap<K & object, V> | Map<K, V>,\n\tkey: K,\n\tdef: () => V,\n): V {\n\tif (map.has(key as any)) {\n\t\treturn map.get(key as any)!;\n\t}\n\tconst value = def();\n\tmap.set(key as any, value);\n\treturn value;\n}\n","import { safeify, getMapValue } from './utils';\n\n/**\n * 判断对象是否可被代理\n */\nfunction isProxyable(v: any): v is object | Function {\n\treturn Boolean(v && ['object', 'function'].includes(typeof v));\n}\n\nlet getValue: any;\n/**\n * 获取被代理对象\n * @param obj  要被代理的对象\n * @param nest 递归代理的层数\n */\nexport function encase<T>(value: T, nest: number | boolean = 0): T {\n\tif (!isProxyable(value)) { return value; }\n\tconst original = recover(value);\n\tconst nestLayer: number = nest === true ? Infinity : nest || 0;\n\tconst proxy = new Proxy(original, {\n\t\tset(target, prop, value, receiver) {\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.set(target, prop, value, receiver);\n\t\t\t}\n\t\t\tconst has = Reflect.has(target, prop);\n\t\t\tconst modified =\n\t\t\t\tReflect.set(target, prop, value, encase(receiver));\n\t\t\tif (!modified) { return modified; }\n\t\t\tif (has !== Reflect.has(target, prop)) {\n\t\t\t\tmarkChange(target, true);\n\t\t\t}\n\t\t\treturn modified;\n\t\t},\n\t\tget(target, prop, receiver) {\n\t\t\tif (getValue === proxy) {\n\t\t\t\tif (prop === '__monitorable__recover__') {\n\t\t\t\t\tgetValue = original;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t\t}\n\t\t\tmarkRead(target, prop);\n\t\t\tconst value = Reflect.get(target, prop, encase(receiver));\n\t\t\tif (nestLayer > 0) { return encase(value, nestLayer - 1); }\n\t\t\treturn value;\n\t\t},\n\t\tsetPrototypeOf(target, proto) {\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.setPrototypeOf(target, proto);\n\t\t\t}\n\t\t\tconst oldProto = Reflect.getPrototypeOf(target);\n\t\t\tconst modified = Reflect.setPrototypeOf(target, proto);\n\t\t\tif (modified && oldProto !== proto) {\n\t\t\t\tmarkChange(target, false);\n\t\t\t}\n\t\t\treturn modified;\n\t\t},\n\t\tgetPrototypeOf(target) {\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.getPrototypeOf(target);\n\t\t\t}\n\t\t\tmarkRead(target, false);\n\t\t\tconst value: any = Reflect.getPrototypeOf(target);\n\t\t\tif (nestLayer > 0) {\n\t\t\t\treturn encase(value, nestLayer - 1);\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\tdefineProperty(target, prop, attr) {\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.defineProperty(target, prop, attr);\n\t\t\t}\n\t\t\tlet changed = true;\n\t\t\tif ('value' in attr) {\n\t\t\t\tconst desc =\n\t\t\t\t\tReflect.getOwnPropertyDescriptor(target, prop);\n\t\t\t\tif (\n\t\t\t\t\tdesc && 'value' in desc\n\t\t\t\t\t&& recover(attr.value) === recover(desc.value)) {\n\t\t\t\t\tchanged = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst modified = Reflect.defineProperty(target, prop, attr);\n\t\t\tif (changed && modified) {\n\t\t\t\tmarkChange(target, prop);\n\t\t\t}\n\t\t\treturn modified;\n\t\t},\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.getOwnPropertyDescriptor(target, prop);\n\t\t\t}\n\t\t\tmarkRead(target, prop);\n\t\t\treturn Reflect.getOwnPropertyDescriptor(target, prop);\n\t\t},\n\t\tdeleteProperty(target, prop) {\n\t\t\tif (nest === false) {\n\t\t\t\treturn Reflect.deleteProperty(target, prop);\n\t\t\t}\n\t\t\tconst has = Reflect.has(target, prop);\n\t\t\tconst deleted = Reflect.deleteProperty(target, prop);\n\t\t\tif (has && !Reflect.has(target, prop)) {\n\t\t\t\tmarkChange(target, prop);\n\t\t\t\tmarkChange(target, true);\n\t\t\t}\n\t\t\treturn deleted;\n\t\t},\n\t\townKeys(target) {\n\t\t\tif (nest === false) { return Reflect.ownKeys(target); }\n\t\t\tmarkRead(target, true);\n\t\t\treturn Reflect.ownKeys(target);\n\t\t},\n\t\thas(target, prop) {\n\t\t\tif (nest === false) { return Reflect.has(target, prop); }\n\t\t\tmarkRead(target, true);\n\t\t\treturn Reflect.has(target, prop);\n\t\t},\n\t});\n\treturn proxy;\n}\n/** 获取被代理的原始值 */\nexport function recover<T>(v: T): T {\n\tif (!v) { return v; }\n\tif (!isProxyable(v)) { return v; }\n\tlet value = v;\n\ttry {\n\t\tgetValue = v;\n\t\tvalue = (v as any).__monitorable__recover__;\n\t} catch {}\n\tvalue = getValue;\n\tgetValue = false;\n\tif (!value) { return v; }\n\tif (typeof value === 'object') { return value; }\n\tif (typeof value === 'function') { return value; }\n\treturn v;\n}\nexport function equal(a: any, b: any): boolean {\n\treturn recover(a) === recover(b);\n}\n\nexport type ReadMap =  Map<\n\tobject | Function,\n\tSet<string | boolean | symbol>\n>;\n\n/** 已被读取的 */\nlet read: ReadMap | undefined;\n\n/**\n * 标记已读状态\n * @param obj  要标记的对象\n * @param prop 要标记的属性\n */\nexport function markRead(\n\tobj: object | Function,\n\tprop: string | number | boolean | symbol,\n) {\n\tif (!read) { return; }\n\tconst set = getMapValue(read, obj, () => new Set());\n\tif (typeof prop === 'number') {\n\t\tprop = String(prop);\n\t}\n\tset.add(prop);\n}\n/**\n * 监听函数的执行，并将执行过程中读取的对象值设置到 map 中\n * @param fn 要执行的含糊\n * @param map 用于存储被读取对象的 map\n * @param clear 是否在发送错误时清空 map\n */\nexport function observe<T>(\n\tfn: () => T,\n\tmap: ReadMap = new Map(),\n\tclear = false,\n): T {\n\tconst oldRead = read;\n\tread = map;\n\ttry {\n\t\treturn fn();\n\t} catch(e) {\n\t\tif (clear) {\n\t\t\tmap.clear();\n\t\t}\n\t\tthrow e;\n\t} finally {\n\t\tread = oldRead;\n\t}\n}\n\n\nconst watchList = new WeakMap<\n\tobject | Function,\n\tMap<string | boolean | symbol, Set<() => void>>\n>();\n/**\n * 标记属性的修改，同时触发监听函数\n * @param target 要标记的对象\n * @param prop   要标记的属性 特别的，false 表示原型，true 表示成员\n */\nexport function markChange(\n\ttarget: object | Function,\n\tprop: string | number | boolean | symbol,\n) {\n\tif (!target) { return; }\n\tif (!isProxyable(target)) {\n\t\treturn;\n\t}\n\tif (typeof prop === 'number') {\n\t\tprop = String(prop);\n\t} else if (\n\t\ttypeof prop !== 'symbol'\n\t\t&& typeof prop !== 'string'\n\t\t&& typeof prop !== 'boolean'\n\t) {\n\t\treturn;\n\t}\n\n\tconst watch = watchList.get(target)?.get?.(prop);\n\tif (!watch) { return; }\n\tfor (const w of [...watch]) {\n\t\tw();\n\t}\n}\n\n/**\n * 监听对象属性的变化\n * @param target 要监听的对象\n * @param prop   要监听的属性名 特别的，false 表示原型，true 表示成员\n * @param fn     属性改变后触发的函数\n */\nexport function watchProp(\n\ttarget: object | Function,\n\tprop: string | number | boolean | symbol,\n\tcb: () => void,\n): () => void {\n\tif (!target) { return () => {}; }\n\tif (!(typeof target === 'object' || typeof target === 'function')) {\n\t\treturn () => {};\n\t}\n\tif (typeof cb !== 'function') {\n\t\treturn  () => {};\n\t}\n\tif (typeof prop === 'number') {\n\t\tprop = String(prop);\n\t}\n\tif (\n\t\ttypeof prop !== 'symbol'\n\t\t&& typeof prop !== 'string'\n\t\t&& typeof prop !== 'boolean'\n\t) {\n\t\treturn () => {};\n\t}\n\tconst key = prop;\n\ttarget = recover(target);\n\tlet map = watchList.get(target);\n\tif (!map) {\n\t\tmap = new Map();\n\t\twatchList.set(target, map);\n\t}\n\tconst list = getMapValue(map, key, () => new Set());\n\tcb = safeify(cb);\n\tlist.add(cb);\n\tlet removed = false;\n\treturn () => {\n\t\tif (removed) { return; }\n\t\tremoved = true;\n\n\t\t// 从当前列表中移除\n\t\tlist.delete(cb);\n\n\t\t// 从属性关联中删除\n\t\tif (list.size) { return; }\n\t\tif (!map) { return; }\n\t\tmap.delete(key);\n\n\t\t// 映射列表中删除\n\t\tif (map.size) { return; }\n\t\twatchList.delete(target);\n\t};\n\n}\n","import { observe, watchProp, ReadMap } from './state';\nimport { safeify } from './utils';\n\nexport interface Executable<T> {\n\t(): T;\n\tstop(): void;\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\nexport function createExecutable<T>(\n\tfn: () => T,\n\tcb: (changed: boolean) => void,\n): Executable<T> {\n\tcb = safeify(cb);\n\tlet cancelList: (() => void)[] | undefined;\n\t/** 取消监听 */\n\tfunction cancel() {\n\t\tif (!cancelList) { return false; }\n\t\tconst list = cancelList;\n\t\tcancelList = undefined;\n\t\tlist.forEach(f => f());\n\t\treturn true;\n\t}\n\tfunction trigger() {\n\t\tif (!cancel()) { return; }\n\t\tcb(true);\n\t};\n\tfunction exec() {\n\t\tcancel();\n\t\tconst thisRead: ReadMap = new Map();\n\t\ttry {\n\t\t\treturn observe(fn, thisRead, true);\n\t\t} finally {\n\t\t\tif (thisRead.size) {\n\t\t\t\tcancelList = [];\n\t\t\t\tfor ( let [obj, props] of thisRead) {\n\t\t\t\t\tfor (const p of props) {\n\t\t\t\t\t\tcancelList.push(watchProp(obj, p, trigger));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcb(false);\n\t\t\t}\n\t\t}\n\t}\n\texec.stop = () => {\n\t\tif (!cancel()) { return; }\n\t\tcb(false);\n\t};\n\treturn exec;\n}\n","import { markRead, markChange, recover, encase } from './state';\nimport { safeify } from './utils';\nimport { createExecutable } from './executable';\n\n/** 取消监听的方法 */\nexport interface CancelWatch {\n\t(): void;\n}\n/** 可监听值 */\nexport interface Value<T> {\n\t(): T;\n\t(v: T, mrak?: boolean): T;\n\tvalue: T;\n\twatch(cb: WatchCallback<T, this>): CancelWatch;\n\tstop(): void;\n}\n/** 监听函数 */\nexport interface WatchCallback<T, V extends Value<T> = Value<T>> {\n\t(v: V, stoped: boolean): void;\n}\nconst values = new WeakSet<Value<any>>();\nexport function isValue(x: any): x is Value<any> {\n\treturn values.has(x);\n}\n/** 触发监听 */\ninterface Trigger {\n\t(): void;\n\t/** 是否存在监听函数 */\n\thas(): boolean;\n\t/** 停止监听 */\n\tstop(): void;\n}\nexport interface Options {\n\tproxy?: boolean;\n}\n\n\nfunction createValue<T, V extends Value<T> = Value<T>>(\n\trecover: () => T,\n\tsetValue?: (value: T, markChange: () => void) => void,\n\tstop: () => void = () => {},\n\tchange: () => void = () => {},\n): {value: V, trigger: Trigger} {\n\tfunction set(v: T, marked = false) {\n\t\tif (!setValue) { return; }\n\t\ttry {\n\t\t\tsetValue(v, () => { marked = true; });\n\t\t} finally {\n\t\t\tif (marked) {\n\t\t\t\ttrigger();\n\t\t\t}\n\t\t}\n\t}\n\tfunction get() {\n\t\tmarkRead(value, 'value');\n\t\treturn recover();\n\t}\n\tconst value: V = ((...v: [T] | [T, boolean] | []): T => {\n\t\tif (v.length) {\n\t\t\tset(v[0], v[1]);\n\t\t\treturn v[0];\n\t\t}\n\t\treturn get();\n\t}) as V;\n\tReflect.defineProperty(value, 'value', {\n\t\tget,\n\t\tset,\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n\n\tfunction watch(cb: WatchCallback<T, V>): () => void {\n\t\tif (!callbacks) { return () => {}; }\n\t\tcb = safeify(cb);\n\t\tcallbacks.push(cb);\n\t\tchange();\n\t\tlet cancelled = false;\n\t\treturn () => {\n\t\t\tif (cancelled) { return; }\n\t\t\tcancelled = true;\n\t\t\tif (!callbacks) { return; }\n\t\t\tconst index = callbacks.findIndex(a => a === cb);\n\t\t\tif (index < 0) { return; }\n\t\t\tcallbacks.splice(index, 1);\n\t\t\tchange();\n\t\t};\n\t}\n\tlet callbacks: WatchCallback<T, V>[] | undefined = [];\n\tReflect.defineProperty(value, 'watch', {\n\t\tget() { return watch; },\n\t\tset() {},\n\t\tconfigurable: true,\n\t});\n\tconst trigger = (() => {\n\t\tif (!callbacks) { return; }\n\t\tmarkChange(value, 'value');\n\t\tfor (const cb of [...callbacks]) {\n\t\t\tcb(value, false);\n\t\t}\n\t}) as Trigger;\n\ttrigger.has = () => Boolean(callbacks?.length);\n\ttrigger.stop = () => {\n\t\tif (!callbacks) { return; }\n\t\tconst list = callbacks;\n\t\tcallbacks = undefined;\n\t\tfor (const cb of [...list]) {\n\t\t\tcb(value, true);\n\t\t}\n\t};\n\tvalues.add(value);\n\tlet stoped = false;\n\tvalue.stop = () => {\n\t\tif (stoped) { return; }\n\t\tstoped = true;\n\t\tstop();\n\t\ttrigger.stop();\n\n\t};\n\treturn {value, trigger};\n}\n/**\n * 创建引用值\n * @param value 初始值\n * @param options 选项\n */\nexport function value<T>(\n\tvalue: T,\n\toptions?: Options | boolean,\n): Value<T>;\nexport function value<T>(\n\tdef: T,\n\toptions?: Options | boolean,\n): Value<T> {\n\tconst proxy = options === true || options && options.proxy;\n\tlet source: T;\n\tlet proxyed: T;\n\tconst { value } = createValue<T>(\n\t\t() => proxyed,\n\t\t(v, mark) => {\n\t\t\tif (proxy) { v = recover(v); }\n\t\t\tif (v === source) { return; }\n\t\t\tsource = v;\n\t\t\tproxyed = proxy ? encase(source) : source;\n\t\t\tmark();\n\t\t},\n\t);\n\tvalue(def);\n\treturn value;\n}\n\n/**\n * 创建计算值\n * @param getter 取值方法\n * @param options 选项\n */\nexport function computed<T>(\n\tgetter: () => T,\n\toptions?: Options | boolean,\n): Value<T>;\n/**\n * 创建可赋值计算值\n * @param getter 取值方法\n * @param setter 复制方法\n * @param options 选项\n */\nexport function computed<T>(\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n\toptions?: Options | boolean,\n): Value<T>;\nexport function computed<T>(\n\tgetter: () => T,\n\tsetter?: ((value: T) => void) | Options | boolean,\n\toptions?: Options | boolean,\n): Value<T>;\nexport function computed<T>(\n\tgetter: () => T,\n\tsetter?: ((value: T) => void) | Options | boolean,\n\toptions?: Options | boolean,\n): Value<T> {\n\tif (typeof setter !== 'function') {\n\t\toptions = setter;\n\t\tsetter = undefined;\n\t}\n\tconst setValue = setter;\n\tconst proxy = options === true || options && options.proxy;\n\tlet source: T;\n\tlet proxyed: T;\n\tlet stoped = false;\n\tlet computed = false;\n\tlet trigger: Trigger | undefined;\n\tconst executable = createExecutable(getter, changed => {\n\t\tcomputed = !changed;\n\t\tif (changed  && trigger) {\n\t\t\ttrigger();\n\t\t}\n\t});\n\tfunction run() {\n\t\tcomputed = true;\n\t\ttry {\n\t\t\tsource = executable();\n\t\t\tif (proxy) { source = recover(source); }\n\t\t\tproxyed = proxy ? encase(source) : source;\n\t\t\treturn proxyed;\n\t\t} catch(e) {\n\t\t\tif (!stoped) {\n\t\t\t\tcomputed = false;\n\t\t\t}\n\t\t\tthrow e;\n\t\t}\n\t}\n\tlet value: Value<T>;\n\t({value, trigger} = createValue<T, Value<T>>(\n\t\t() => computed || stoped ? proxyed : run(),\n\t\tsetValue && (v => setValue(proxy ? recover(v) : v)),\n\t\t() => {\n\t\t\tif (stoped) { return; }\n\t\t\tstoped = true;\n\t\t\tif (computed) { return; }\n\t\t\trun();\n\t\t},\n\t));\n\treturn value;\n\n}\n\nexport function merge<T, V extends Value<T> = Value<T>>(\n\tcb: WatchCallback<T, V>\n): WatchCallback<T, V> {\n\tlet oldValue: any;\n\tlet runed = false;\n\treturn (v, stoped) => {\n\t\tif (stoped) { return cb(v, stoped); }\n\t\tconst newValue = recover(v());\n\t\tif (newValue === oldValue && runed) { return; }\n\t\truned = true;\n\t\toldValue = newValue;\n\t\tcb(v, stoped);\n\t};\n}\n\ntype OffValue<V> = V extends Value<infer T> ? T : V;\n\nexport function mix<T extends object>(\n\tsource: T\n): { [K in keyof T]: OffValue<T[K]>; } {\n\tfor (const k of Reflect.ownKeys(source)) {\n\t\tconst descriptor = Reflect.getOwnPropertyDescriptor(source, k);\n\t\tif (!descriptor) { continue; }\n\t\tif (\n\t\t\t!('value' in descriptor)\n\t\t\t|| 'get' in descriptor\n\t\t\t|| 'set' in descriptor\n\t\t) { continue; }\n\t\tconst value = descriptor.value;\n\t\tif (!isValue(value)) { continue; }\n\t\tdescriptor.get = () => value.value;\n\t\tif (descriptor.writable) {\n\t\t\tdescriptor.set = v => (value as Value<any>).value = v;\n\t\t}\n\t\tdelete descriptor.value;\n\t\tdelete descriptor.writable;\n\t\tReflect.defineProperty(source, k, descriptor);\n\t}\n\treturn source as any;\n}\n"],"names":["printErrorLog","printError","info","print","undefined","console","error","safeify","fn","p","e","getMapValue","map","key","def","has","get","value","set","isProxyable","v","Boolean","includes","getValue","encase","nest","original","recover","nestLayer","Infinity","proxy","Proxy","target","prop","receiver","Reflect","modified","markChange","markRead","setPrototypeOf","proto","oldProto","getPrototypeOf","defineProperty","attr","changed","desc","getOwnPropertyDescriptor","deleteProperty","deleted","ownKeys","__monitorable__recover__","equal","a","b","read","obj","Set","String","add","observe","Map","clear","oldRead","watchList","WeakMap","watch","w","watchProp","cb","list","removed","delete","size","createExecutable","cancelList","cancel","forEach","f","trigger","exec","thisRead","props","push","stop","values","WeakSet","isValue","x","createValue","setValue","change","marked","length","enumerable","configurable","callbacks","cancelled","index","findIndex","splice","stoped","options","source","proxyed","mark","computed","getter","setter","executable","run","merge","oldValue","runed","newValue","mix","k","descriptor","writable"],"mappings":"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"}